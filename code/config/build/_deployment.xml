<?xml version="1.0" encoding="UTF-8"?>
<project name="release">
    <taskdef resource="net/sf/antcontrib/antlib.xml">
    </taskdef>

    <target name="deployment-update-release-number">
        <echo file="${basedir}/config/release" append="false">${env.BUILD_NUMBER}</echo>
    </target>

    <target name="deployment-prepare">
        <exec executable="mkdir" failonerror="true">
            <arg value="-p" />
            <arg value="${basedir}/../release" />
        </exec>
        <exec executable="mkdir" failonerror="true">
            <arg value="-p" />
            <arg value="${basedir}/../logs" />
        </exec>
    </target>

    <target name="deployment-archive">
        <exec executable="tar" failonerror="true">
            <arg value="--exclude=.git" />
            <arg value="-zcf" />
            <arg value="${basedir}/../release/release.tar.gz" />
            <arg value="${basedir}/../code" />
        </exec>
    </target>

    <target name="deployment-release">
        <!--<antcall target="deployment-prepare" />-->
        <!--<antcall target="deployment-update-release-number" />-->
        <!--<antcall target="tools-composer-install" />-->
        <!--<antcall target="tools-public-vendor" />-->
        <!--<antcall target="tools-generate-static" />-->

        <!--<antcall target="db-generate-source" />-->
        <!--<antcall target="deployment-archive" />-->

        <echo>${env.PHPUNIT}</echo>

        <echo>${env.SELENIUM}</echo>

        <echo>${env.APP_ENV}</echo>

        <if>
            <equals arg1="${env.PHPUNIT}" arg2="true"/>
            <then>
                <echo>PHP UNIT!!!!!!!</echo>
            </then>
        </if>

        <if>
            <equals arg1="${env.SELENIUM}" arg2="true"/>
            <then>
                <echo>SELENIUM!!!!!!!</echo>
            </then>
        </if>

        <echo>${env.BUILD_NUMBER}</echo>
    </target>
</project>
